<!DOCTYPE html>
<html class='no-js' dir='ltr' lang='en'>
<head>
<meta charset='utf-8' />
<meta content='chrome=1' http-equiv='X-UA-Compatible' />
<meta content='width=780' name='viewport' />
<link href='../../images/compass_icon.png' rel='shortcut icon' type='image/png' />
<title>
Extending Compass | Compass Documentation
</title>
<link charset='utf-8' href='../../stylesheets/screen.css' rel='stylesheet' type='text/css' />
<script src='../../javascripts/modernizr-1.6.min.js' type='text/javascript'></script>
<script src='../../javascripts/jquery-1.3.2.min.js' type='text/javascript'></script>
<script src='../../javascripts/jquery.cookie.js' type='text/javascript'></script>
<script deferred='deferred' src='../../javascripts/placeholder.js' type='text/javascript'></script>
<script src='../../javascripts/site.js' type='text/javascript'></script>
<script deferred='deferred' src='../../javascripts/fixups.js' type='text/javascript'></script>

</head>
<body class='site tutorial' id='help-tutorials-extending'>
<div id='wrap'>
<header id='banner' role='banner'>
<form action='http://compass-style.org/search/' id='search-docs' method='GET'>
<input id='search' name='q' placeholder='Search the docs' type='text' value='' />
</form>
<nav id='main-nav' role='navigation'>
<ul>
<li class='vcard'>
<a class='fn org url uid' href='../../index.html' rel='home'>Home</a>
</li>
<li>
<a href='../../docs/index.html' rel='documentation'>Reference</a>
</li>
<li>
<a href='../index.html' rel='help'>Help</a>
</li>
<li>
<a href='../../blog/index.html' rel='blog'>Blog</a>
</li>
<li>
<a href='../../get-involved/index.html' rel='get-involved'>Get Involved</a>
</li>
<li>
<a href='../../install/index.html' rel='install'>Install</a>
</li>
</ul>
</nav>
</header>

<div id='sub-nav'>
<nav id='module-nav'>
<ul>
<li class='getting-started'>
<a href='../index.html' rel='getting started'><span>Getting Started</span></a>
</li>
<li class='tutorials'>
<a href='index.html' rel='getting started'><span>Tutorials</span></a>
</li>
<li class='support'>
<a href='http://groups.google.com/group/compass-users' rel='support'><span>Support</span></a>
</li>
<li>
<a href='http://github.com/chriseppstein/compass/issues' rel='bugs'><span>Bugs</span></a>
</li>
</ul>
</nav>
</div>
<div id='page'>
<div id='docs_panel'>
<div id='theme_pref'>
<a href='extending.1.html#' rel='theme' title='switch theme'>Q</a>
</div>
<div id='version'>
Version:
<a class='number' href='../../CHANGELOG/index.html'>0.12.2</a>
</div>
</div>
<aside role='sidebar'>
<nav id='local-nav'>
<ul><li class='selected'>
<h2>
<a class='selected' href='index.html'>Tutorials</a>
</h2>
</li>
<ul><li>
<h3>
<a href='integration/index.html'>Application Integration</a>
</h3>
</li>
<li>
<h3>
<a href='best_practices/index.html'>Best practices</a>
</h3>
</li>
<li>
<h3>
<a href='blueprint/index.html'>Blueprint Framework</a>
</h3>
</li>
<li>
<h3>
<a href='command-line/index.html'>Compass Command Line Documentation</a>
</h3>
</li>
<li>
<h3>
<a href='configuration-reference/index.html'>Configuration Reference</a>
</h3>
</li>
<li>
<h3>
<a href='contributing.html'>Contributing</a>
</h3>
</li>
<li>
<h3>
<a href='extensions.html'>Creating Compass Extensions</a>
</h3>
</li>
<li class='selected'>
<h3>
<a class='selected' href='extending.1.html'>Extending Compass</a>
</h3>
</li>
<li>
<h3>
<a href='production-css/index.html'>Production Stylesheets</a>
</h3>
</li>
<li>
<h3>
<a href='exclude_vendor_prefixes/index.html'>Removing Vendor Prefixes from Compass</a>
</h3>
</li>
<li>
<h3>
<a href='spriting/index.html'>Spriting</a>
</h3>
</li>
<ul><li class=''>
<a class='' href='spriting/customization-options.1.html'>
<span>Customization</span>
</a>
</li>
<li class=''>
<a class='' href='spriting/magic-selectors.1.html'>
<span>Magic Selectors</span>
</a>
</li>
<li class=''>
<a class='' href='spriting/sprite-layouts.1.html'>
<span>Sprite layouts</span>
</a>
</li>
</ul>
<li>
<h3>
<a href='testing/index.html'>Testing</a>
</h3>
</li>
<li>
<h3>
<a href='upgrading/index.html'>Upgrading</a>
</h3>
</li>
<ul><li class=''>
<a class='' href='upgrading/lemonade_upgrade_guide/index.html'>
<span>Lemonade Upgrade</span>
</a>
</li>
<li class=''>
<a class='' href='upgrading/im-scared/index.html'>
<span>Scared to Upgrade?</span>
</a>
</li>
<li class=''>
<a class='' href='upgrading/antares/index.html'>
<span>Upgrading to v0.11</span>
</a>
</li>
</ul>
<li>
<h3>
<a href='configurable-variables/index.html'>Working with Configurable Variables</a>
</h3>
</li>
</ul>
</ul>
</nav>
</aside>
<article><h1>Extending Compass</h1>

<h2>Sprite engine</h2>

<p>The sprite engine is the work horse of sprite generation it's the interface for assembling and writing the image file to disk.</p>

<h3>Requirements</h3>

<p>A sprite engine requires two methods <code>construct_sprite</code>, and <code>save(filename)</code></p>

<p>Once inside the class you have access to <code>images</code> which is a collection of <a href="http://rdoc.info/github/chriseppstein/compass/dda7c9/Compass/SassExtensions/Sprites/Image">Compass::SassExtensions::Sprites::Image</a></p>

<h3>Configuration</h3>

<p>To enable your sprite engine from the config file set</p>

<pre><code>sprite_engine = :&lt;engine name&gt;
</code></pre>

<p>The example below will load <code>Compass::SassExtension::Sprites::ChunkyPngEngine.new(width, height, images)</code></p>

<pre><code>sprite_engine = :chunky_png
</code></pre>

<h3>Class Definition</h3>

<pre><code>module Compass
  module SassExtensions
    module Sprites
      class ChunkyPngEngine &lt; Compass::SassExtensions::Sprites::Engine

        def construct_sprite
          #do something
        end    

        def save(filename)
          #save file
        end

      end
    end
  end
end
</code></pre>

<p><a name="adding-configuration-properties"></a></p>

<h2>Adding Configuration Properties to Compass</h2>

<p>To add a new configuration property to Compass:</p>

<pre><code>Compass::Configuration.add_configuration_property(:foobar, "this is a foobar") do
  if environment == :production
    "foo"
  else
    "bar"
  end
end
</code></pre>

<p>This will do several things:</p>

<ol>
<li>make it possible for users to set the <code>foobar</code> configuration property in their
configuration file.</li>
<li>Ruby code can read and write the <code>foobar</code> attribute from any configuration object.</li>
<li>It will add the comment <code># this is a foobar</code> above the property in the configuration file.
A comment is not required, you can simply omit this argument if you like.</li>
<li>The block of code provided allows you to assign a sensible default value according to other
settings in the configuration or by using arbitrary code to determine what the value should
be. For instance it could read from another configuration file or it could change based on
the user's operating system.</li>
</ol>

</article>

</div>
<footer role='contentinfo'><div class='links'>
<ul>
<li class='media'>
<a rel="license" href="../../copyright/index.html" id="cc-logo" class="m"><img alt="Creative Commons License" style="border-width:0;margin-top:7px" src="http://i.creativecommons.org/l/by-nc-sa/3.0/us/88x31.png" /></a>
<div class='bd'>Christopher M.<br>Eppstein</div>
</li>
<li>
Compass is Charityware -
<br>
Help the UMDF:
<a href='http://umdf.org/compass'>Donate Now!</a>
</li>
<li>
<strong>Problem with this page?</strong>
<br>
Please <a id="doc-issue" href="https://github.com/chriseppstein/compass/issues/new?labels=documentation">file a bug</a>.
</li>
</ul>
</div>
<script type='text/javascript'>
  //<![CDATA[
    $(function() {
      var href = $("#doc-issue").attr("href");
      var body_contents = "On Page: ";
      body_contents += document.location.toString();
      body_contents += "\n\nI was looking for:\n<details>\n\nBut instead I found:\n<more details>\n"
      href = href + "&body=" + encodeURIComponent(body_contents);
      $("#doc-issue").attr("href", href)
     });
  //]]>
</script>
</footer>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-6779438-1");
pageTracker._trackPageview();
} catch(err) {}</script>
<script type="text/javascript">
var disqus_shortname = 'compassbetadocs';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/compassbetadocs/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

</body>
</html>
